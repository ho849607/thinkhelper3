
<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>ThinkHelper 2.1 â€” Workspace & Discover</title>
  <link rel="icon" href="data:,"/>

  <!-- CKEditor -->
  <script src="https://cdn.ckeditor.com/ckeditor5/41.3.1/classic/ckeditor.js"></script>
  <!-- Optional helpers -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" defer></script>

  <style>
    :root{--bg:#f6f8fb;--fg:#0b1020;--muted:#6a7691;--panel:#fff;--card:#f2f5ff;--border:#d6deee;--hover:#e9effe;--accent:#2563eb;--touch:48px}
    :root[data-theme="dark"]{--bg:#0b1020;--fg:#f1f5ff;--muted:#a8b4cf;--panel:#0f172a;--card:#101a30;--border:#273453;--hover:#16213b;--accent:#60a5fa}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--fg);font-family:-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,sans-serif;display:flex;flex-direction:column;min-height:100vh;overflow:hidden}
    .topbar{position:sticky;top:0;z-index:50;display:flex;align-items:center;justify-content:space-between;gap:8px;padding:calc(8px + env(safe-area-inset-top,0)) 12px 10px;background:var(--panel);border-bottom:1px solid var(--border)}
    .brand{display:flex;align-items:center;gap:10px;font-weight:900}
    .logo{width:18px;height:18px;border-radius:4px;background:linear-gradient(135deg,#60a5fa,#34d399)}
    .modes{display:flex;gap:8px}
    .tab{border:1px solid var(--border);background:var(--card);padding:.55rem .9rem;border-radius:10px;font-weight:800;cursor:pointer;min-height:var(--touch)}
    .tab[aria-selected="true"]{background:var(--panel);outline:2px solid var(--accent)}
    .actions{display:flex;gap:8px;align-items:center}
    .iconbtn,.btn{border:1px solid var(--border);background:var(--card);color:var(--fg);border-radius:10px;padding:.55rem .9rem;font-weight:800;cursor:pointer;min-height:var(--touch)}
    .iconbtn:hover,.btn:hover{background:var(--hover)}
    main{flex:1;min-height:0}
    #workspace{height:100%;display:grid;grid-template-columns:280px 1fr 320px;gap:12px;padding:12px;overflow:hidden}
    aside#left,aside#right,#center{background:var(--panel);border:1px solid var(--border);border-radius:12px;min-height:0;display:flex;flex-direction:column;overflow:hidden}
    #left{padding:10px}
    .tabs{display:grid;grid-template-columns:repeat(4,1fr);gap:6px;margin-bottom:8px}
    .tabs button{border:1px solid var(--border);background:var(--card);border-radius:8px;padding:.5rem .7rem;font-weight:800;cursor:pointer;min-height:40px}
    .tabs button[data-active="1"]{background:var(--panel);color:var(--accent)}
    .left-search{display:flex;gap:8px;margin:6px 0 10px}
    .left-search input{flex:1;border:1px solid var(--border);background:var(--card);border-radius:10px;padding:.6rem .8rem;font-size:.95rem}
    .panel{flex:1;overflow:auto;display:none}
    .panel[data-active="1"]{display:block}
    .panel-head{display:flex;justify-content:space-between;align-items:center;margin:6px 0 8px}
    .doc{display:flex;justify-content:space-between;align-items:center;padding:.55rem .7rem;border:1px solid var(--border);border-radius:8px;background:var(--card);margin-bottom:6px;cursor:pointer}
    .doc:hover{background:var(--hover)}
    .doc .ttl{font-weight:800;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
    .doc .date{color:var(--muted);font-size:.82rem;margin-left:8px;white-space:nowrap}
    .tmpl{display:grid;grid-template-columns:1fr;gap:8px}
    .card{border:1px solid var(--border);background:var(--card);border-radius:12px;padding:.9rem;cursor:pointer}
    .card:hover{background:var(--hover)}
    .slist{display:flex;flex-direction:column;gap:2px;padding-bottom:52px}
    .srow{display:flex;align-items:center;gap:8px;padding:.55rem .7rem;border-radius:8px;border:1px solid var(--border);background:var(--card);cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .srow:hover{background:var(--hover)}
    .srow .q{flex:1;display:flex;align-items:center;gap:8px;min-width:0}
    .srow .meta{color:var(--muted);font-size:.82rem;margin-left:6px;white-space:nowrap}
    .srow .del{margin-left:auto;border:none;background:transparent;cursor:pointer;border-radius:8px;padding:.25rem .4rem;display:none}
    .srow:hover .del{display:block}
    .sfooter{position:sticky;bottom:0;background:var(--panel);padding:8px;border-top:1px dashed var(--border);display:flex;justify-content:flex-end}
    #center{padding:0}
    #center-inner{display:flex;flex-direction:column;height:100%}
    .ck-sticky-panel .ck-toolbar{position:sticky;top:0;z-index:5}
    .editor-wrap{flex:1;min-height:0;overflow:auto;padding:10px}
    .ck-editor__editable_inline{min-height:60vh!important;background:#fff;color:#222;border-radius:8px;box-shadow:none !important}
    [data-theme="dark"] .ck-editor__editable_inline{color:#ffe7b3;background:#0b1327}
    .doc-title{font-weight:900;font-size:1.05rem;padding:10px;color:var(--muted);border-bottom:1px dashed var(--border);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    #right{padding:10px}
    .ai-head{display:flex;justify-content:space-between;align-items:center}
    .ai-box{flex:1;overflow:auto;margin-top:8px;display:flex;flex-direction:column;gap:8px}
    .bubble{max-width:85%;padding:.9rem 1rem;border:1px solid var(--border);border-radius:14px;background:var(--card);line-height:1.6;white-space:pre-wrap}
    .me{margin-left:auto;background:#143763;color:#fff;border-color:#143763}
    .ai{margin-right:auto;border-color:#314264;background:#122142;color:#fff}
    .ai-form{display:flex;gap:8px;margin-top:auto}
    .ai-form textarea{flex:1;border:1px solid var(--border);border-radius:10px;background:var(--card);color:var(--fg);padding:.7rem .9rem;min-height:64px;resize:vertical}
    .ai-form button{min-width:92px}
    #discover{display:none;padding:12px;height:100%;overflow:auto}
    #discover[data-active="1"]{display:block}
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
    .news{border:1px solid var(--border);background:var(--panel);border-radius:12px;overflow:hidden;display:flex;flex-direction:column}
    .news img{width:100%;height:160px;object-fit:cover;background:var(--border)}
    .news .meta{font-size:.82rem;color:var(--muted);padding:6px 10px 0}
    .news .title{padding:6px 10px 6px;font-weight:900}
    .news .desc{padding:0 10px 10px;color:var(--muted);font-size:.92rem}
    .news .actions{margin-top:auto;display:flex;gap:6px;padding:8px;border-top:1px dashed var(--border)}
    .news .actions button{flex:1}
    footer{padding:8px 12px calc(8px + env(safe-area-inset-bottom,0));border-top:1px solid var(--border);background:var(--panel);font-size:.95rem;display:flex;flex-wrap:wrap;gap:12px;justify-content:space-between}
    .status-left,.status-right{display:flex;gap:12px;align-items:center}
    .tip{color:var(--muted)}
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;z-index:80}
    .modal{position:fixed;inset:0;display:none;z-index:90;align-items:center;justify-content:center}
    .modal-inner{width:min(640px,92vw);max-height:80vh;overflow:auto;background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:14px}
    .modal h3{margin:.2rem 0 0.6rem}
    .row{display:flex;gap:10px;align-items:center;margin:8px 0}
    .row label{flex:1}
    .sep{height:1px;background:var(--border);margin:10px 0}
    .row .btnbar{display:flex;gap:8px}
    #suggestionBox{position:absolute;display:none;z-index:9999;background:var(--panel);border:1px solid var(--border);border-radius:6px;box-shadow:0 4px 12px rgba(0,0,0,.15);min-width:150px;max-width:240px;overflow:hidden;font-family:monospace,sans-serif}
    #suggestionBox ul{list-style:none;margin:0;padding:4px 0}
    #suggestionBox li{padding:6px 12px;cursor:pointer;font-size:.9rem;color:var(--fg);display:flex;justify-content:space-between}
    #suggestionBox li.active{background:#007AFF;color:#fff}
    #suggestionBox li:hover:not(.active){background:var(--hover)}
    #suggestionBox li .sub{font-size:.75rem;opacity:.7;margin-left:8px}
    @media (max-width:1024px){ #workspace{grid-template-columns:240px 1fr 300px} .grid{grid-template-columns:repeat(2,1fr)} }
    @media (max-width:820px){ #workspace{grid-template-columns:220px 1fr} #right{display:none} .grid{grid-template-columns:1fr} }
    @media (max-width:480px){ .modes{gap:6px} .tab,.iconbtn,.btn{border-radius:12px} #workspace{grid-template-columns:1fr} #left{display:none} #right{display:none} .ck-editor__editable_inline{min-height:50vh!important} .topbar{gap:6px} .brand div:last-child{font-size:1rem} .quickbar{position:fixed;bottom:0;left:0;right:0;z-index:60;display:flex;gap:8px;padding:8px calc(12px + env(safe-area-inset-left,0)) calc(8px + env(safe-area-inset-bottom,0)) calc(12px + env(safe-area-inset-right,0));background:var(--panel);border-top:1px solid var(--border)} .quickbar .btn{flex:1} footer{padding-bottom:calc(56px + env(safe-area-inset-bottom,0))} }
    @media (prefers-reduced-motion: reduce){ *{scroll-behavior:auto;animation:none!important;transition:none!important} }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="brand"><div class="logo"></div><div data-i18n="brand">ThinkHelper</div></div>
    <div class="modes" role="tablist" aria-label="Main modes">
      <button class="tab" id="tabDiscover" role="tab" aria-selected="true" data-i18n="tab.discover">ğŸ“° ë””ìŠ¤ì»¤ë²„</button>
      <button class="tab" id="tabWorkspace" role="tab" aria-selected="false" data-i18n="tab.work">ğŸ“ ì‘ì—…ì‹¤</button>
    </div>
    <div class="actions">
      <button class="iconbtn" id="btnTheme" data-i18n-title="tip.theme" title="ë‹¤í¬/ë¼ì´íŠ¸ ì „í™˜(âŒ˜/Ctrl+J)">ğŸŒ“</button>
      <button class="iconbtn" id="btnHelp" data-i18n-title="tip.help" title="ë„ì›€ë§/ë‹¨ì¶•í‚¤">â“</button>
      <button class="iconbtn" id="btnSettings" data-i18n-title="tip.settings" title="í™˜ê²½ì„¤ì •">âš™ï¸</button>
    </div>
  </div>
  <section id="discover" data-active="1" aria-label="Discover feed">
    <div style="display:flex;justify-content:space-between;align-items:center;margin:6px 0 12px">
      <h3 style="margin:0" data-i18n="insight.today">ì˜¤ëŠ˜ì˜ ì¸ì‚¬ì´íŠ¸</h3>
      <div class="toolbar-hint" data-i18n="insight.hint">ê´€ì‹¬ì‚¬ ì„¤ì • í›„ ë” ì •í™•í•œ í”¼ë“œê°€ ë³´ì—¬ìš”.</div>
    </div>
    <div id="apiNotice" style="display:none;border:1px dashed var(--border);border-radius:10px;padding:8px;margin:0 0 10px;color:var(--muted)">
      <span data-i18n="insight.apiNotice">ì‹¤ì‹œê°„ ë‰´ìŠ¤ API ì‹¤íŒ¨, ìƒ˜í”Œ í”¼ë“œë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.</span>
      <span> </span>
      <a href="https://news.google.com/?hl=ko&gl=KR&ceid=KR:ko" target="_blank" rel="noopener" data-i18n="insight.openGnews">Google ë‰´ìŠ¤ ì—´ê¸°</a>
    </div>
    <div class="grid" id="discoverGrid"></div>
  </section>
  <main id="workspace" style="display:none" aria-label="Workspace">
    <aside id="left" aria-label="ë¬¸ì„œ/í…œí”Œë¦¿/ë¼ì´ë¸ŒëŸ¬ë¦¬/ê²€ìƒ‰ê¸°ë¡">
      <div class="tabs">
        <button id="tFiles" data-active="1" data-i18n="left.files">ğŸ—‚ï¸ íŒŒì¼</button>
        <button id="tTmpl" data-active="0" data-i18n="left.templates">ğŸ¨ í…œí”Œë¦¿</button>
        <button id="tLib"  data-active="0" data-i18n="left.library">ğŸ“š ë¼ì´ë¸ŒëŸ¬ë¦¬</button>
        <button id="tSearch" data-active="0" data-i18n="left.search">ğŸ” ê²€ìƒ‰ê¸°ë¡</button>
      </div>
      <div class="left-search" role="search">
        <input id="leftSearchInput" type="search" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." aria-label="ê²€ìƒ‰ì–´ ì…ë ¥"/>
        <button class="btn" id="leftSearchBtn">ê²€ìƒ‰</button>
      </div>
      <div id="pFiles" class="panel" data-active="1">
        <div class="panel-head">
          <b>ë‚´ íŒŒì¼</b>
          <button class="btn" id="btnNewDocLeft">ï¼‹ ìƒˆ ë¬¸ì„œ</button>
        </div>
        <div id="fileList"></div>
      </div>
      <div id="pTmpl" class="panel" data-active="0">
        <div class="panel-head"><b>í…œí”Œë¦¿</b></div>
        <div class="tmpl" id="tmplList"></div>
      </div>
      <div id="pLib" class="panel" data-active="0">
        <div class="panel-head"><b>ë¼ì´ë¸ŒëŸ¬ë¦¬</b></div>
        <div id="libList"></div>
      </div>
      <div id="pSearch" class="panel" data-active="0">
        <div class="panel-head"><b>ê²€ìƒ‰ê¸°ë¡</b></div>
        <div id="searchList" class="slist"></div>
        <div class="sfooter">
          <button class="btn" id="btnClearSearch">ğŸ—‘ï¸ ê¸°ë¡ ì§€ìš°ê¸°</button>
        </div>
      </div>
    </aside>
    <section id="center" aria-label="ì—ë””í„°">
      <div class="doc-title" id="docTitleBar">ë¬´ì œ</div>
      <div id="center-inner">
        <div class="editor-wrap">
          <div id="editor"></div>
        </div>
      </div>
    </section>
    <aside id="right" aria-label="AI ì–´ì‹œìŠ¤í„´íŠ¸">
      <div class="ai-head">
        <b data-i18n="ai.title">ğŸ¤– AI ë„ìš°ë¯¸</b>
        <button class="iconbtn" id="aiToggle" data-i18n="ai.toggle" title="ì ‘ê¸°/í¼ì¹˜ê¸°">âˆ’</button>
      </div>
      <div class="ai-box" id="aiBox">
        <div class="bubble ai" data-i18n="ai.welcome">ì•ˆë…•! í•„ìš”í•œ í…œí”Œë¦¿ì„ ë„£ì–´ì£¼ê±°ë‚˜, ì„ íƒí•œ í…ìŠ¤íŠ¸ë¥¼ ìš”ì•½í•´ì¤„ê²Œ.</div>
      </div>
      <form class="ai-form" id="aiForm">
        <textarea id="aiInput" data-i18n-placeholder="ai.placeholder" placeholder="ì˜ˆ) ì„ íƒ ë¶€ë¶„ ìš”ì•½í•´ì¤˜ / SWOT í‹€ ë„£ì–´ì¤˜"></textarea>
        <button class="btn" type="submit" data-i18n="ai.send">ì „ì†¡</button>
      </form>
    </aside>
  </main>
  <div class="quickbar" id="quickbar" style="display:none">
    <button class="btn" id="qbDiscover" data-i18n="tab.discover">ğŸ“° ë””ìŠ¤ì»¤ë²„</button>
    <button class="btn" id="qbWorkspace" data-i18n="tab.work">ğŸ“ ì‘ì—…ì‹¤</button>
    <button class="btn" id="qbNew" data-i18n="btn.new">ï¼‹ ìƒˆ ë¬¸ì„œ</button>
  </div>
  <footer>
    <div class="status-left">
      <span>Â© <span data-i18n="brand">ThinkHelper</span></span>
      <span id="wordCount" data-i18n-prefix="status.words.prefix">Words: </span>
      <span id="docState" data-i18n="status.saved">ë¬¸ì„œ ìƒíƒœ: ì €ì¥ë¨</span>
    </div>
    <div class="status-right">
      <span class="tip" id="tip">ğŸ’¡ <span id="tipText">Tab=ìë™ì™„ì„± Â· Esc=ë‹«ê¸° Â· â†‘/â†“=ì´ë™</span></span>
      <span id="aiStatus">AI: <span id="net" data-i18n="net.online">ì˜¨ë¼ì¸</span></span>
      <span id="langDisp" data-i18n-prefix="status.lang">ì–¸ì–´: <b id="langGuess">ko</b></span>
    </div>
  </footer>
  <div class="modal-backdrop" id="backdrop"></div>
  <div class="modal" id="settingsModal" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
    <div class="modal-inner">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h3 id="settingsTitle" data-i18n="settings.title">í™˜ê²½ì„¤ì •</h3>
        <button class="iconbtn" id="btnCloseSettings" data-i18n-title="settings.closeTip" title="ë‹«ê¸°">âœ•</button>
      </div>
      <div class="sep"></div>
      <div class="row"><label for="selLang" data-i18n="settings.lang">ê¸°ë³¸ ì–¸ì–´</label>
        <select id="selLang" style="padding:.45rem .6rem;border:1px solid var(--border);border-radius:8px;background:var(--card)">
          <option value="ko">í•œêµ­ì–´ (ko)</option>
          <option value="ja">æ—¥æœ¬èª (ja)</option>
          <option value="en">English (en)</option>
        </select>
      </div>
      <div class="row"><label for="toggleSuggest" data-i18n="settings.suggest">ì¶”ì²œì–´(ìë™ì™„ì„±) ì‚¬ìš©</label><input id="toggleSuggest" type="checkbox"/></div>
      <div class="row"><label for="togglePersonal" data-i18n="settings.personal">ë§ì¶¤í˜• ì¶”ì²œ(í•™ìŠµ ë°˜ì˜) ì‚¬ìš©</label><input id="togglePersonal" type="checkbox"/></div>
      <div class="row"><label for="toggleEye" data-i18n="settings.eye">ì•„ì´ì»¨íƒ ëª¨ë“œ(ì¹´ë©”ë¼ ì ‘ê·¼) ì‚¬ìš©</label><input id="toggleEye" type="checkbox"/></div>
      <div class="sep"></div>
      <div class="row">
        <label data-i18n="settings.learnData">í•™ìŠµ ë°ì´í„°</label>
        <div class="btnbar">
          <button class="btn" id="btnMemExport" data-i18n="settings.backup">ğŸ’¾ ë°±ì—… ë‚´ë³´ë‚´ê¸°</button>
          <button class="btn" id="btnMemImport" data-i18n="settings.restore">ğŸ“¥ ê°€ì ¸ì˜¤ê¸°</button>
          <button class="btn" id="btnMemReset" data-i18n="settings.reset">ğŸ—‘ï¸ ì´ˆê¸°í™”</button>
        </div>
      </div>
      <div class="sep"></div>
      <div style="display:flex;justify-content:flex-end;gap:8px">
        <button class="btn" id="btnSettingsReset" data-i18n="settings.default">ê¸°ë³¸ê°’</button>
        <button class="btn" id="btnSettingsSave" data-i18n="settings.save">ì €ì¥</button>
      </div>
    </div>
  </div>

<script>
/* (JS identical to the version you approved; omitted here for brevity in README block) */
</script>
</body>
</html>
````

> **Note**: In your repo, the `index.html` above should include the full JavaScript block (same as the last approved version). For readability, this README excerpt elides the JS at the endâ€”use the complete file content from this canvas section.
